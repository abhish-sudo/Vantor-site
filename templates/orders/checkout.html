{% extends 'base.html' %}
{% load static %}

{% block title %}Checkout - Vantor{% endblock %}

{% block content %}
<section class="cart-container">
    <div class="container">
        <h1 class="section-title mb-lg">Checkout</h1>
        
        <div style="display: grid; grid-template-columns: 2fr 1fr; gap: var(--space-lg);">
            <div>
                <form method="post">
                    {% csrf_token %}
                    
                    <h3 class="mb-md">Contact Information</h3>
                    <div class="form-group">
                        {{ form.email.label_tag }}
                        {{ form.email }}
                        {{ form.email.errors }}
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-md);">
                        <div class="form-group">
                            {{ form.first_name.label_tag }}
                            {{ form.first_name }}
                            {{ form.first_name.errors }}
                        </div>
                        <div class="form-group">
                            {{ form.last_name.label_tag }}
                            {{ form.last_name }}
                            {{ form.last_name.errors }}
                        </div>
                    </div>
                    
                    <div class="form-group">
                        {{ form.phone.label_tag }}
                        {{ form.phone }}
                        {{ form.phone.errors }}
                    </div>
                    
                    <h3 class="mb-md mt-lg">Shipping Address</h3>
                    <div class="form-group">
                        {{ form.address_line1.label_tag }}
                        {{ form.address_line1 }}
                        {{ form.address_line1.errors }}
                    </div>
                    
                    <div class="form-group">
                        {{ form.address_line2.label_tag }}
                        {{ form.address_line2 }}
                        {{ form.address_line2.errors }}
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-md);">
                        <div class="form-group">
                            {{ form.city.label_tag }}
                            {{ form.city }}
                            {{ form.city.errors }}
                        </div>
                        <div class="form-group">
                            {{ form.state_province.label_tag }}
                            {{ form.state_province }}
                            {{ form.state_province.errors }}
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-md);">
                        <div class="form-group">
                            {{ form.postal_code.label_tag }}
                            {{ form.postal_code }}
                            {{ form.postal_code.errors }}
                        </div>
                        <div class="form-group">
                            {{ form.country.label_tag }}
                            {{ form.country }}
                            {{ form.country.errors }}
                        </div>
                    </div>
                    
                    <div class="form-group">
                        {{ form.notes.label_tag }}
                        {{ form.notes }}
                        {{ form.notes.errors }}
                    </div>
                    
                    <button type="submit" class="btn" style="width: 100%; padding: 1.25rem;">
                        Place Order
                    </button>
                </form>
            </div>
            
            <div class="cart-summary">
                <h3 class="mb-md">Order Summary</h3>
                
                {% for item in cart %}
                <div style="display: flex; justify-content: space-between; margin-bottom: var(--space-sm); font-size: 0.875rem;">
                    <span>{{ item.product.name }} Ã— {{ item.quantity }}</span>
                    <span>NPR {{ item.total_price }}</span>
                </div>
                {% endfor %}
                
                <div style="border-top: 1px solid rgba(255,255,255,0.2); margin: var(--space-md) 0;"></div>
                
                <div style="display: flex; justify-content: space-between; margin-bottom: var(--space-sm);">
                    <span>Subtotal:</span>
                    <span>NPR {{ cart.get_total_price }}</span>
                </div>
                
                <div style="display: flex; justify-content: space-between; margin-bottom: var(--space-sm);">
                    <span>Shipping:</span>
                    <span>Free</span>
                </div>
                
                <div style="border-top: 1px solid rgba(255,255,255,0.2); padding-top: var(--space-sm);"></div>
                
                <div class="cart-total">
                    <div style="display: flex; justify-content: space-between;">
                        <span>Total:</span>
                        <span>NPR {{ cart.get_total_price }}</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}
